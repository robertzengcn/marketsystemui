pipeline {
    agent { label 'jenkins-agent' } 

    stages {
       stage("provide config file"){
        steps{
      configFileProvider([configFile(fileId: 'marketsystemui-test.env.test', targetLocation: '.env.test')]) {   
             }
      }
      }
            stage("provide nginx config file"){
        steps{
      configFileProvider([configFile(fileId: 'marketsystemui-test.nginx.test.conf', targetLocation: 'nginx.test.conf')]) {   
             }
      }
      }
        stage('build docker composer') {
            steps {
                 sh 'docker image rm marketsystemuitest ||true'
                 sh 'docker build -f Dockerfile.test -t marketsystemuitest .' 
            }
        }
    }
}